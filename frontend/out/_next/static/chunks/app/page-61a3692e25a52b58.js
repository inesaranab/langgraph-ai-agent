(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3238:function(e,s,t){Promise.resolve().then(t.bind(t,13714))},13714:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return F}});var a=t(57437),r=t(2265),l=t(40236),n=t(23260),i=t(86574),c=t(9880);function d(e){let{content:s,className:t=""}=e;return(0,a.jsx)("div",{className:"markdown-content ".concat(t),children:(0,a.jsx)(l.UG,{remarkPlugins:[n.Z],components:{code(e){let{node:s,className:t,children:r,...l}=e,n=/language-(\w+)/.exec(t||"");return n&&n?(0,a.jsx)(i.Z,{style:c.Z,language:n[1],PreTag:"div",customStyle:{margin:"1rem 0",borderRadius:"0.5rem",fontSize:"0.875rem"},...l,children:String(r).replace(/\n$/,"")}):(0,a.jsx)("code",{className:"bg-dark-200 text-primary-600 px-1.5 py-0.5 rounded text-sm font-mono",...l,children:r})},h1:e=>{let{children:s}=e;return(0,a.jsx)("h1",{className:"text-xl font-bold text-dark-800 mb-3 mt-4 first:mt-0",children:s})},h2:e=>{let{children:s}=e;return(0,a.jsx)("h2",{className:"text-lg font-semibold text-dark-800 mb-2 mt-3 first:mt-0",children:s})},h3:e=>{let{children:s}=e;return(0,a.jsx)("h3",{className:"text-base font-medium text-dark-700 mb-2 mt-3 first:mt-0",children:s})},p:e=>{let{children:s}=e;return(0,a.jsx)("p",{className:"mb-3 leading-relaxed text-dark-700",children:s})},ul:e=>{let{children:s}=e;return(0,a.jsx)("ul",{className:"list-none mb-3 space-y-1",children:s})},li:e=>{let{children:s}=e;return(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full mt-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-dark-700",children:s})]})},ol:e=>{let{children:s}=e;return(0,a.jsx)("ol",{className:"list-decimal list-inside mb-3 space-y-1 text-dark-700",children:s})},a:e=>{let{children:s,href:t}=e;return(0,a.jsx)("a",{href:t,className:"text-primary-600 hover:text-primary-700 underline",target:"_blank",rel:"noopener noreferrer",children:s})},blockquote:e=>{let{children:s}=e;return(0,a.jsx)("blockquote",{className:"border-l-4 border-primary-500 pl-4 my-3 italic text-dark-600",children:s})},hr:()=>(0,a.jsx)("hr",{className:"border-dark-300 my-4"}),table:e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"overflow-x-auto my-3",children:(0,a.jsx)("table",{className:"min-w-full border border-dark-300 rounded-lg",children:s})})},th:e=>{let{children:s}=e;return(0,a.jsx)("th",{className:"bg-dark-200 border border-dark-300 px-3 py-2 text-left font-medium text-dark-800",children:s})},td:e=>{let{children:s}=e;return(0,a.jsx)("td",{className:"border border-dark-300 px-3 py-2 text-dark-700",children:s})},strong:e=>{let{children:s}=e;return(0,a.jsx)("strong",{className:"font-semibold text-dark-800",children:s})},em:e=>{let{children:s}=e;return(0,a.jsx)("em",{className:"italic text-dark-700",children:s})}},children:s})})}var o=t(48736),x=t(29202),m=t(32489),h=t(31047),u=t(96362);function p(e){let{source:s,isOpen:t,onClose:r}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-600 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 mr-4",children:["arxiv"===s.type?(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-500 flex-shrink-0"}):(0,a.jsx)(x.Z,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white line-clamp-2",children:s.title})]}),(0,a.jsx)("button",{onClick:r,className:"p-1 rounded-md hover:bg-gray-800 text-gray-400 hover:text-gray-300",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-400",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("arxiv"===s.type?"bg-green-900/30 text-green-400":"bg-blue-900/30 text-blue-400"),children:"arxiv"===s.type?"Academic Paper":"Web Source"})}),s.published_date&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:new Date(s.published_date).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Preview"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed bg-gray-800/50 p-4 rounded-lg",children:s.snippet})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[s.url&&(0,a.jsxs)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"View Source"]}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("".concat(s.title," - ").concat(s.url))},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Copy Citation"})]})]})}):null}function g(e){let{source:s,onClick:t}=e;return(0,a.jsxs)("button",{onClick:t,className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-colors hover:scale-105 ".concat("arxiv"===s.type?"bg-green-900/30 text-green-400 hover:bg-green-900/50":"bg-blue-900/30 text-blue-400 hover:bg-blue-900/50"),title:s.title,children:["arxiv"===s.type?(0,a.jsx)(o.Z,{className:"w-3 h-3"}):(0,a.jsx)(x.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"arxiv"===s.type?"Paper":"Web"})]})}function y(e){let{sources:s,className:t=""}=e,[l,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1);if(!s||0===s.length)return null;let d=i?s:s.slice(0,3),o=s.length>3;return(0,a.jsxs)("div",{className:"mt-4 ".concat(t),children:[(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide",children:["Sources (",s.length,")"]}),o&&(0,a.jsx)("button",{onClick:()=>c(!i),className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:i?"Show Less":"Show All ".concat(s.length)})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map((e,s)=>(0,a.jsx)(g,{source:e,onClick:()=>n(e)},s))})]}),(0,a.jsx)(p,{source:l,isOpen:null!==l,onClose:()=>n(null)})]})}function b(e){var s;let{message:t}=e,r="user"===t.role;return(0,a.jsx)("div",{className:"flex ".concat(r?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-3xl rounded-lg px-6 py-4 ".concat(r?"user-message":"assistant-message"),children:[r?(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words",children:t.content}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{content:t.content,className:"max-w-none"}),(null===(s=t.metadata)||void 0===s?void 0:s.sources)&&t.metadata.sources.length>0&&(0,a.jsx)(y,{sources:t.metadata.sources})]}),!r&&t.metadata&&(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-dark-200 text-xs text-dark-500",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[t.metadata.tools_used&&t.metadata.tools_used.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-primary-600",children:"Tools:"}),(0,a.jsx)("span",{children:t.metadata.tools_used.join(", ")})]}),t.metadata.processing_time&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-primary-600",children:"Time:"}),(0,a.jsxs)("span",{children:[t.metadata.processing_time.toFixed(2),"s"]})]}),t.metadata.helpfulness_score&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-primary-600",children:"Quality:"}),(0,a.jsxs)("span",{children:[(100*t.metadata.helpfulness_score).toFixed(0),"%"]})]}),t.metadata.sources&&t.metadata.sources.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-primary-600",children:"Sources:"}),(0,a.jsxs)("span",{children:[t.metadata.sources.length," found"]})]})]})}),(0,a.jsx)("div",{className:"text-xs mt-2 ".concat(r?"text-primary-100":"text-dark-400"),children:t.timestamp.toLocaleTimeString()})]})})}function j(e){let{onSendMessage:s,isLoading:t,isConnected:l,disabled:n=!1}=e,[i,c]=(0,r.useState)(""),d=e=>{e.preventDefault(),i.trim()&&!t&&l&&!n&&(s(i.trim()),c(""))};return(0,a.jsxs)("form",{onSubmit:d,className:"flex space-x-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d(e))},placeholder:n?"Please configure your API keys above...":l?"Ask me anything...":"Please check your backend connection...",disabled:t||!l||n,rows:1,className:"w-full px-4 py-3 bg-dark-100 border border-dark-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none disabled:bg-dark-200 disabled:cursor-not-allowed text-dark-800 placeholder-dark-500",style:{minHeight:"52px",maxHeight:"120px"}})}),(0,a.jsx)("button",{type:"submit",disabled:!i.trim()||t||!l||n,className:"button-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Sending..."})]}):(0,a.jsx)("span",{children:"Send"})})]})}function f(e){let{messages:s,isLoading:t,onSendMessage:l,isConnected:n,disabled:i=!1}=e,c=(0,r.useRef)(null),d=()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,r.useEffect)(()=>{d()},[s]),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 scroll-mt-20",children:[0===s.length?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-primary-600 to-primary-700 rounded-full flex items-center justify-center mb-6",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-dark-50 rounded-full"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-dark-800 mb-2",children:"Welcome to Research AI Agent"}),i?(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-dark-600 mb-4",children:"Configure your API keys to start using the AI assistant."}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800",children:[(0,a.jsx)("p",{className:"font-medium mb-2",children:"⚙️ Click the Settings button in the header to:"}),(0,a.jsxs)("ul",{className:"text-left space-y-1 ml-4",children:[(0,a.jsx)("li",{children:"• Add your OpenAI API key"}),(0,a.jsx)("li",{children:"• Add your Tavily API key"}),(0,a.jsx)("li",{children:"• Start chatting with the AI"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-dark-600 mb-6",children:"An intelligent agent powered by LangGraph. Get help with web search, research academic papers, and complex questions with real-time information."}),(0,a.jsxs)("div",{className:"bg-dark-100 border border-primary-200 rounded-lg p-4 text-sm text-dark-700",children:[(0,a.jsx)("p",{className:"font-medium mb-3 text-primary-700",children:"Available capabilities:"}),(0,a.jsxs)("ul",{className:"text-left space-y-2",children:[(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"Web search for current information"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"Academic research via ArXiv"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"General questions and analysis"})]}),(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"Multi-step reasoning tasks"})]})]})]})]})]})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[s.map((e,s)=>(0,a.jsx)(b,{message:e},s)),t&&(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-dark-500",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,a.jsx)("span",{className:"text-sm",children:"Processing request..."})]})]}),(0,a.jsx)("div",{ref:c})]}),(0,a.jsx)("div",{className:"border-t border-dark-200 bg-dark-100 px-6 py-4 scroll-mt-20",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(j,{onSendMessage:l,isLoading:t,isConnected:n&&!i,disabled:i})})})]})}function N(e){let{sessionId:s,isConnected:t,onClearChat:r,onNewSession:l,onRefreshConnection:n}=e;return(0,a.jsxs)("div",{className:"w-80 sidebar flex flex-col",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-dark-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-dark-800",children:"Chat Session"}),(0,a.jsxs)("p",{className:"text-sm text-dark-600 mt-1",children:["ID: ",s.substring(0,8),"..."]})]}),(0,a.jsx)("div",{className:"p-4 border-b border-dark-200",children:(0,a.jsxs)("div",{className:"p-3 rounded-lg ".concat(t?"bg-primary-50 border border-primary-200":"bg-red-50 border border-red-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t?"bg-primary-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-primary-800":"text-red-800"),children:t?"Connected":"Disconnected"})]}),(0,a.jsx)("button",{onClick:n,className:"text-xs text-dark-500 hover:text-dark-700",children:"Refresh"})]}),!t&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Make sure the backend server is running on port 8000"})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("button",{onClick:l,className:"w-full button-primary text-sm",children:"New Session"}),(0,a.jsx)("button",{onClick:r,className:"w-full button-secondary text-sm",children:"Clear Chat"})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-dark-200 mt-auto",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-dark-800 mb-3",children:"Available Tools"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-dark-600",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"Web Search (Tavily)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"ArXiv Research"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full"}),(0,a.jsx)("span",{children:"Quality Control"})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-dark-200",children:(0,a.jsx)("p",{className:"text-xs text-dark-500",children:"Powered by LangGraph & Next.js"})})]})]})}var v=t(54001),w=t(22252),k=t(87769),S=t(42208),C=t(83229);function A(e){let{isOpen:s,onClose:t,onApiKeysChange:l}=e,[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[o,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(s){let e=localStorage.getItem("openai_api_key")||"",s=localStorage.getItem("tavily_api_key")||"";i(e),d(s),y(""!==e.trim()&&""!==s.trim())}},[s]);let f=async()=>{let e=n.trim(),s=c.trim();if(e&&s){j(!0);try{localStorage.setItem("openai_api_key",e),localStorage.setItem("tavily_api_key",s),y(!0),l({openai:e,tavily:s}),setTimeout(()=>{t(),j(!1)},500)}catch(e){j(!1),console.error("Error saving API keys:",e)}}else y(!1)};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-yellow-600/30 rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-yellow-500"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-yellow-500",children:"API Settings"})]}),(0,a.jsx)("button",{onClick:t,className:"p-1 rounded-md hover:bg-gray-800 text-gray-400 hover:text-gray-300",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]}),!g&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-red-400",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"API keys required"}),(0,a.jsx)("p",{children:"You need both OpenAI and Tavily API keys to use the AI assistant."})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["OpenAI API Key ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:o?"text":"password",value:n,onChange:e=>i(e.target.value),placeholder:"sk-...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-3 pr-12 text-white placeholder-gray-400 focus:border-yellow-500 focus:outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-300",children:o?(0,a.jsx)(k.Z,{className:"w-5 h-5"}):(0,a.jsx)(S.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Get your key from"}),(0,a.jsxs)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-yellow-500 hover:underline flex items-center gap-1",children:["OpenAI Platform ",(0,a.jsx)(u.Z,{className:"w-3 h-3"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Tavily API Key ",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",value:c,onChange:e=>d(e.target.value),placeholder:"tvly-...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-3 pr-12 text-white placeholder-gray-400 focus:border-yellow-500 focus:outline-none"}),(0,a.jsx)("button",{type:"button",onClick:()=>p(!h),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-300",children:h?(0,a.jsx)(k.Z,{className:"w-5 h-5"}):(0,a.jsx)(S.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Get your key from"}),(0,a.jsxs)("a",{href:"https://tavily.com/",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-yellow-500 hover:underline flex items-center gap-1",children:["Tavily ",(0,a.jsx)(u.Z,{className:"w-3 h-3"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:f,disabled:!n.trim()||!c.trim()||b,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors font-medium",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{className:"w-4 h-4"}),"Save Keys"]})}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("openai_api_key"),localStorage.removeItem("tavily_api_key"),i(""),d(""),y(!1),l({openai:"",tavily:""})},disabled:b,className:"px-4 py-3 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Clear"})]}),g&&!b&&(0,a.jsx)("div",{className:"text-center text-sm text-green-400 bg-green-900/20 border border-green-500/30 rounded-lg p-3",children:"✓ API keys configured successfully"})]})]})}):null}var _=t(73247),I=t(90740),Z=t(91723),P=t(86595);function T(e){let{isOpen:s,onClose:t,allSources:l,className:n=""}=e,[i,c]=(0,r.useState)([]),[d,p]=(0,r.useState)(""),[g,y]=(0,r.useState)("all"),[b,j]=(0,r.useState)("newest");(0,r.useEffect)(()=>{let e=l.map((e,s)=>({...e,messageIndex:Math.floor(s/3),query:"Research Query",timestamp:new Date(Date.now()-(l.length-s)*6e4)}));d&&(e=e.filter(e=>e.title.toLowerCase().includes(d.toLowerCase())||e.snippet.toLowerCase().includes(d.toLowerCase()))),"all"!==g&&(e=e.filter(e=>e.type===g)),e.sort((e,s)=>{switch(b){case"newest":return s.timestamp.getTime()-e.timestamp.getTime();case"oldest":return e.timestamp.getTime()-s.timestamp.getTime();case"relevance":return s.score-e.score;default:return 0}}),c(e)},[l,d,g,b]);let f=e=>"arxiv"===e?"text-green-400":"text-blue-400",N=e=>"arxiv"===e?"bg-green-900/30":"bg-blue-900/30";if(!s)return null;let v=l.filter(e=>"web"===e.type).length,w=l.filter(e=>"arxiv"===e.type).length;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-600 rounded-lg w-full max-w-4xl h-[85vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_.Z,{className:"w-6 h-6 text-yellow-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Research Sources"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[l.length," sources • ",v," web • ",w," academic"]})]})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 rounded-md hover:bg-gray-800 text-gray-400 hover:text-gray-300",children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-700 bg-gray-800/50",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,a.jsx)("div",{className:"flex-1 min-w-64",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search sources...",value:d,onChange:e=>p(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-400 focus:border-yellow-500 focus:outline-none"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-yellow-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"all",children:"All Sources"}),(0,a.jsx)("option",{value:"web",children:"Web Sources"}),(0,a.jsx)("option",{value:"arxiv",children:"Academic Papers"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-yellow-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"newest",children:"Newest First"}),(0,a.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,a.jsx)("option",{value:"relevance",children:"Most Relevant"})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===i.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(_.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"No sources found"}),(0,a.jsx)("p",{className:"text-gray-500",children:0===l.length?"Start a conversation to see research sources appear here.":"Try adjusting your search or filter criteria."})]}):(0,a.jsx)("div",{className:"space-y-4",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 hover:bg-gray-800/70 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(N(e.type)),children:"arxiv"===e.type?(0,a.jsx)(o.Z,{className:"w-4 h-4 ".concat(f(e.type))}):(0,a.jsx)(x.Z,{className:"w-4 h-4 ".concat(f(e.type))})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-white mb-1 line-clamp-2",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded ".concat(N(e.type)," ").concat(f(e.type)),children:"arxiv"===e.type?"Academic Paper":"Web Source"}),e.published_date&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:new Date(e.published_date).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(P.Z,{className:"w-3 h-3"}),(0,a.jsxs)("span",{children:[Math.round(100*e.score),"% relevance"]})]})]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 ml-4",children:e.url&&(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-md hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:"Open source",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})})})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed line-clamp-3",children:e.snippet})]},s))})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700 bg-gray-800/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[(0,a.jsxs)("span",{children:["Showing ",i.length," of ",l.length," sources"]}),(0,a.jsx)("button",{onClick:()=>{p(""),y("all"),j("newest")},className:"text-yellow-500 hover:text-yellow-400 transition-colors",children:"Clear Filters"})]})})]})})}class E{setApiKeys(e,s){this.openaiApiKey=e,this.tavilyApiKey=s}async healthCheck(){let e=await fetch("".concat(this.baseUrl,"/health"));if(!e.ok)throw Error("Health check failed");return e.json()}async sendMessage(e,s){let t=await fetch("".concat(this.baseUrl,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:s,openai_api_key:this.openaiApiKey,tavily_api_key:this.tavilyApiKey})});if(!t.ok)throw Error((await t.json()).detail||"Failed to send message");let a=await t.json();return{...a,timestamp:new Date(a.timestamp)}}async *sendMessageStream(e,s){var t;let a=await fetch("".concat(this.baseUrl,"/chat/stream"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,session_id:s,openai_api_key:this.openaiApiKey,tavily_api_key:this.tavilyApiKey})});if(!a.ok)throw Error("Failed to start streaming");let r=null===(t=a.body)||void 0===t?void 0:t.getReader(),l=new TextDecoder;if(!r)throw Error("No response body");try{for(;;){let{done:e,value:s}=await r.read();if(e)break;for(let e of l.decode(s).split("\n"))if(e.startsWith("data: "))try{let s=JSON.parse(e.slice(6));yield s}catch(e){console.error("Failed to parse SSE data:",e)}}}finally{r.releaseLock()}}async getChatHistory(e){let s=await fetch("".concat(this.baseUrl,"/chat/").concat(e,"/history"));if(!s.ok)throw Error("Failed to get chat history");return(await s.json()).map(e=>({...e,timestamp:new Date(e.timestamp)}))}async clearHistory(e){if(!(await fetch("".concat(this.baseUrl,"/chat/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to clear chat history")}async getSessions(){let e=await fetch("".concat(this.baseUrl,"/sessions"));if(!e.ok)throw Error("Failed to get sessions");return e.json()}constructor(){this.openaiApiKey="",this.tavilyApiKey="",this.baseUrl="https://langgraph-ai-agent-production-561e.up.railway.app",console.log("ChatService configured for:",this.baseUrl)}}var D=t(63639),K=t(82800),O=t(98728);function F(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[o,x]=(0,r.useState)({openai:"",tavily:""}),[m,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)([]),v=(0,r.useRef)(new E);(0,r.useEffect)(()=>{i(Math.random().toString(36).substring(7)),w()},[]);let w=async()=>{try{let e=await v.current.healthCheck();d(e.agent_ready)}catch(e){d(!1)}},k=async e=>{if(!e.trim()||t)return;let a={role:"user",content:e,timestamp:new Date};s(e=>[...e,a]),l(!0),Date.now().toString();let r={role:"assistant",content:"",timestamp:new Date};s(e=>[...e,r]);try{let t="",a={};for await(let r of v.current.sendMessageStream(e,n))if("chunk"===r.type&&r.full_content)t=r.full_content,s(e=>e.map((s,a)=>a===e.length-1&&"assistant"===s.role?{...s,content:t}:s));else if("done"===r.type){a=r.metadata||{},s(e=>e.map((s,r)=>r===e.length-1&&"assistant"===s.role?{...s,content:t,metadata:a}:s));let e=null==a?void 0:a.sources;e&&Array.isArray(e)&&e.length>0&&j(s=>[...s,...e])}else if("error"===r.type)throw Error(r.error||"Streaming error")}catch(e){s(e=>e.map((s,t)=>t===e.length-1&&"assistant"===s.role?{...s,content:"Sorry, I encountered an error. Please try again."}:s)),console.error("Chat error:",e)}finally{l(!1)}},S=async()=>{try{await v.current.clearHistory(n),s([]),j([])}catch(e){console.error("Error clearing chat:",e)}};return(0,a.jsxs)("div",{className:"flex h-screen bg-dark-50",children:[(0,a.jsx)(N,{sessionId:n,isConnected:c,onClearChat:S,onNewSession:()=>{i(Math.random().toString(36).substring(7)),s([]),j([])},onRefreshConnection:w}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("header",{className:"sticky top-0 z-10 bg-dark-100 shadow-sm border-b border-dark-200 px-6 py-4 h-16",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-full",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-dark-800",children:"Research AI Agent"}),(0,a.jsx)("p",{className:"text-xs text-dark-600",children:"Intelligent AI agent powered by LangGraph"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[!m&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm bg-red-100 text-red-800",children:[(0,a.jsx)(D.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"API Keys Required"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm ".concat(c?"bg-primary-100 text-primary-800":"bg-red-100 text-red-800"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(c?"bg-primary-500":"bg-red-500")}),(0,a.jsx)("span",{children:c?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>y(!0),className:"relative p-2 rounded-lg hover:bg-dark-200 text-dark-600 hover:text-dark-800 transition-colors",title:"View Sources (".concat(b.length,")"),children:[(0,a.jsx)(K.Z,{className:"w-5 h-5"}),b.length>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:b.length>9?"9+":b.length})]}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"p-2 rounded-lg hover:bg-dark-200 text-dark-600 hover:text-dark-800 transition-colors",title:"Settings",children:(0,a.jsx)(O.Z,{className:"w-5 h-5"})})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col min-h-0",children:(0,a.jsx)(f,{messages:e,isLoading:t,onSendMessage:k,isConnected:c&&m,disabled:!m})})]}),(0,a.jsx)(A,{isOpen:u,onClose:()=>p(!1),onApiKeysChange:e=>{x(e),h(""!==e.openai.trim()&&""!==e.tavily.trim()),v.current.setApiKeys(e.openai,e.tavily)}}),(0,a.jsx)(T,{isOpen:g,onClose:()=>y(!1),allSources:b})]})}}},function(e){e.O(0,[702,971,117,744],function(){return e(e.s=3238)}),_N_E=e.O()}]);